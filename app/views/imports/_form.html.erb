<%= form_with(model: import,
               local: true,
               remote: true,
               multipart: true) do |form| %>

<%= form.file_field :data,
                    class:"",
                    id: "upload_file",
                    multiple: true,
                    style: 'display: none!important;',
                    accept:".CSV" %>

<div class="card-body">
  <div class="dropzone dz-clickable">
    <div class="dz-message needsclick" onclick="$('#upload_file').click()">
      <i class="h1 text-muted dripicons-cloud-upload"></i>
      <h3>Clique para subir os arquivos</h3>
    </div>
  </div>
  <div id="render_files">
  </div>
</div>

  <div class="actions">
    <%= form.submit "Processar", class:"btn btn-sucess" %>
  </div>
<% end %>

<script type="text/javascript">

  var input = document.getElementById("upload_file");


  input.addEventListener("change", function(){
      var nome = "Não há arquivo selecionado. Selecionar arquivo...";
      if(input.files.length > 0)
      {
        document.getElementById('render_files').innerHTML = ''

        for (var i = 0; i < input.files.length; i++) {

          document.getElementById('render_files').innerHTML += '<div class="dropzone-previews mt-3">'+
            '<div class="card mt-1 mb-0 shadow-none border dz-processing dz-error dz-complete">'+
                    '<div class="p-2">'+
                        '<div class="row align-items-center">'+
                            '<div class="col-auto">'+
                                '<img data-dz-thumbnail="" class="avatar-sm rounded bg-light" alt="">'+
                            '</div>'+
                            '<div class="col pl-0">'+
                                '<a href="javascript:void(0);"class="font-weight-bold"style="color: rgba(255, 255, 255, 0.8);" >'+ input.files[i].name +'</a>'+
                                '<p class="mb-0" data-dz-size=""><strong>0.5</strong> MB</p>'+
                            '</div>'+
                        '</div>'+
                    '</div>'+
                '</div>'+
            '</div>'
        }

      }


  });
</script>
